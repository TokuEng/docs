---
title: 'Advanced Usage'
description: 'Advanced patterns and techniques'
---

## Overview

This guide covers advanced usage patterns for power users and complex use cases.

## Custom Middleware

Add custom middleware to intercept requests and responses:

```javascript
import { createClient } from 'your-library';

const client = createClient({
  apiKey: process.env.API_KEY,
  middleware: [
    {
      onRequest: (config) => {
        console.log(`Making request to: ${config.url}`);
        return config;
      },
      onResponse: (response) => {
        console.log(`Received response: ${response.status}`);
        return response;
      },
    },
  ],
});
```

## Retry Logic

Configure automatic retries for failed requests:

```javascript
const client = createClient({
  apiKey: process.env.API_KEY,
  retry: {
    maxRetries: 3,
    backoff: 'exponential',
    retryOn: [429, 500, 502, 503, 504],
  },
});
```

## Batch Operations

Process multiple items efficiently:

```javascript
// Create multiple items at once
const items = await client.batchCreate([
  { name: 'Item 1' },
  { name: 'Item 2' },
  { name: 'Item 3' },
]);

// Update multiple items
await client.batchUpdate([
  { id: '1', name: 'Updated 1' },
  { id: '2', name: 'Updated 2' },
]);
```

## Streaming Responses

For large datasets, use streaming:

```javascript
const stream = client.stream({
  query: 'SELECT * FROM large_table',
});

for await (const chunk of stream) {
  console.log(chunk);
}
```

## Caching

Enable built-in caching for read operations:

```javascript
const client = createClient({
  apiKey: process.env.API_KEY,
  cache: {
    enabled: true,
    ttl: 60000, // 1 minute
    maxSize: 100,
  },
});

// This request will be cached
const item = await client.get('id');

// Subsequent calls return cached result
const cachedItem = await client.get('id');

// Invalidate cache manually
client.cache.invalidate('id');
```

## Event Listeners

Subscribe to client events:

```javascript
client.on('request', (event) => {
  console.log('Request started:', event.url);
});

client.on('response', (event) => {
  console.log('Response received:', event.status);
});

client.on('error', (event) => {
  console.error('Error occurred:', event.message);
});
```

## TypeScript Generics

Use generics for type-safe operations:

```typescript
interface User {
  id: string;
  name: string;
  email: string;
}

// Type-safe response
const user = await client.get<User>('user-id');
console.log(user.email); // TypeScript knows this is a string

// Type-safe creation
const newUser = await client.create<User>({
  name: 'John',
  email: 'john@example.com',
});
```

<Warning>
Advanced features may have performance implications. Use them judiciously based on your needs.
</Warning>
