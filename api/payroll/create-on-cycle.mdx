---
title: "Create On-Cycle Payroll"
sidebarTitle: "Create On-Cycle"
description: "Create a regular scheduled payroll run"
---

## Overview

Creates a new on-cycle (regular scheduled) payroll run for employees. On-cycle payrolls follow the standard pay schedule and include regular salary payments.

## Endpoint

```
POST /api/payroll/createOnCyclePayroll
```

## Authentication

Requires `tokuOrgAdmin` role for the organization.

## Request

### Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `payDate` | date | Yes | The date employees will be paid |
| `startDate` | date | Yes | Pay period start date |
| `endDate` | date | Yes | Pay period end date |
| `payrollType` | string | Yes | Type of payroll: `TOKU_PAYROLL` or `EXTERNAL_PAYROLL` |
| `employeePayrollInputs` | array | Yes | Array of employee payroll data |
| `externalID` | string | No | Optional external reference ID |
| `runJobAsync` | boolean | No | Run processing asynchronously (default: false) |
| `fileIDs` | array | No | Optional array of associated file IDs |

### Employee Payroll Input Object

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `employeeID` | number | Yes | Employee identifier |
| `daysWorked` | number | Yes | Number of days worked in period |
| `daysInPeriod` | number | Yes | Total days in pay period |
| `salaries` | array | Yes | Salary components |
| `bonuses` | array | No | Bonus payments |
| `vestings` | array | No | Token vesting payments |
| `deductions` | array | No | Deductions from pay |
| `otherEarningsAndDeductions` | array | No | Additional earnings/deductions |
| `payslipFileID` | number | No | Associated payslip file ID |

### Salary Object

| Field | Type | Description |
|-------|------|-------------|
| `yearlyAmount` | number | Annual salary amount |
| `currencyID` | number | Currency identifier |

### Bonus Object

| Field | Type | Description |
|-------|------|-------------|
| `amount` | number | Bonus amount |
| `currencyID` | number | Currency identifier |
| `amountDefinedInCurrencyID` | number | Original currency if different |
| `exchangeRate` | number | Exchange rate if applicable |

### Vesting Object

| Field | Type | Description |
|-------|------|-------------|
| `amount` | number | Token amount vesting |
| `currencyID` | number | Token currency identifier |
| `tokenTrancheID` | number | Associated token tranche |

### Example Request

```bash
curl -X POST "https://api.toku.com/api/payroll/createOnCyclePayroll" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "payDate": "2024-01-31T00:00:00.000Z",
    "startDate": "2024-01-01T00:00:00.000Z",
    "endDate": "2024-01-31T00:00:00.000Z",
    "payrollType": "TOKU_PAYROLL",
    "employeePayrollInputs": [
      {
        "employeeID": 500,
        "daysWorked": 22,
        "daysInPeriod": 22,
        "salaries": [
          {
            "yearlyAmount": 120000,
            "currencyID": 1
          }
        ],
        "bonuses": [],
        "deductions": [],
        "otherEarningsAndDeductions": []
      }
    ]
  }'
```

### JavaScript Example

```javascript
const response = await fetch('https://api.toku.com/api/payroll/createOnCyclePayroll', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${process.env.TOKU_API_KEY}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    payDate: '2024-01-31T00:00:00.000Z',
    startDate: '2024-01-01T00:00:00.000Z',
    endDate: '2024-01-31T00:00:00.000Z',
    payrollType: 'TOKU_PAYROLL',
    employeePayrollInputs: [
      {
        employeeID: 500,
        daysWorked: 22,
        daysInPeriod: 22,
        salaries: [{ yearlyAmount: 120000, currencyID: 1 }]
      }
    ]
  })
});

const payroll = await response.json();
```

## Response

### Success Response (200)

```json
{
  "result": {
    "data": {
      "payrollID": 12347,
      "orgID": 100,
      "payDate": "2024-01-31T00:00:00.000Z",
      "startDate": "2024-01-01T00:00:00.000Z",
      "endDate": "2024-01-31T00:00:00.000Z",
      "state": "DRAFT",
      "type": "TOKU_PAYROLL",
      "createdAt": "2024-01-20T15:00:00.000Z"
    }
  }
}
```

### Error Responses

| Status | Code | Description |
|--------|------|-------------|
| 400 | `INVALID_INPUT` | Invalid request parameters |
| 401 | `UNAUTHORIZED` | Invalid or missing API key |
| 403 | `FORBIDDEN` | User lacks permission |
| 422 | `EMPLOYEE_NOT_ELIGIBLE` | One or more employees cannot be paid |

## Related Endpoints

<CardGroup cols={2}>
  <Card title="Create Off-Cycle" icon="calendar-plus" href="/api/payroll/create-off-cycle">
    Create an off-cycle payroll
  </Card>
  <Card title="Finalize Payroll" icon="check-circle" href="/api/payroll/finalize">
    Finalize a payroll run
  </Card>
</CardGroup>
