---
title: "Can Run Payroll for Employee"
sidebarTitle: "Check Eligibility"
description: "Check if an employee is eligible to be included in a payroll run"
---

## Overview

Validates whether an employee can be included in a payroll run for a specific pay date. This endpoint checks for required configurations, active employment status, and any conflicts with existing payrolls.

## Endpoint

```
GET /api/payroll/canRunPayrollForEmployee
```

## Authentication

Requires `tokuOrgAdmin` role for the organization.

## Request

### Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `employeeID` | number | Yes | The employee ID to check |
| `payDate` | date | Yes | The intended payment date |
| `onCycle` | boolean | Yes | Whether this is an on-cycle (regular) payroll |
| `startDate` | date | No | Pay period start date (for on-cycle) |
| `endDate` | date | No | Pay period end date (for on-cycle) |
| `payrollPeriodsPerYear` | number | No | Number of pay periods per year |

### Example Request

```bash
curl -X GET "https://api.toku.com/api/payroll/canRunPayrollForEmployee" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "employeeID": 500,
    "payDate": "2024-01-31T00:00:00.000Z",
    "onCycle": true,
    "payrollPeriodsPerYear": 12
  }'
```

### JavaScript Example

```javascript
const response = await fetch('https://api.toku.com/api/payroll/canRunPayrollForEmployee', {
  method: 'GET',
  headers: {
    'Authorization': `Bearer ${process.env.TOKU_API_KEY}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    employeeID: 500,
    payDate: '2024-01-31T00:00:00.000Z',
    onCycle: true,
    payrollPeriodsPerYear: 12
  })
});

const eligibility = await response.json();
```

## Response

### Success Response - Eligible (200)

```json
{
  "result": {
    "data": {
      "canRunPayroll": true,
      "employeeID": 500,
      "payDate": "2024-01-31T00:00:00.000Z",
      "checks": {
        "hasActiveEmployment": true,
        "hasPayProfile": true,
        "hasTaxProfile": true,
        "noConflictingPayroll": true,
        "withinEmploymentDates": true
      }
    }
  }
}
```

### Success Response - Not Eligible (200)

```json
{
  "result": {
    "data": {
      "canRunPayroll": false,
      "employeeID": 500,
      "payDate": "2024-01-31T00:00:00.000Z",
      "checks": {
        "hasActiveEmployment": true,
        "hasPayProfile": false,
        "hasTaxProfile": true,
        "noConflictingPayroll": true,
        "withinEmploymentDates": true
      },
      "reasons": [
        "Employee does not have a pay profile configured"
      ]
    }
  }
}
```

### Response Fields

| Field | Type | Description |
|-------|------|-------------|
| `canRunPayroll` | boolean | Whether the employee can be included in payroll |
| `employeeID` | number | Employee identifier |
| `payDate` | string | The checked payment date |
| `checks` | object | Individual eligibility check results |
| `reasons` | array | List of reasons if not eligible (only when `canRunPayroll` is false) |

### Eligibility Checks

| Check | Description |
|-------|-------------|
| `hasActiveEmployment` | Employee status is ACTIVE |
| `hasPayProfile` | Salary and pay configuration is set up |
| `hasTaxProfile` | Tax withholding configuration exists |
| `noConflictingPayroll` | No existing payroll for the same period |
| `withinEmploymentDates` | Pay date is within employment start/end dates |

### Error Responses

| Status | Code | Description |
|--------|------|-------------|
| 401 | `UNAUTHORIZED` | Invalid or missing API key |
| 403 | `FORBIDDEN` | User lacks permission |
| 404 | `NOT_FOUND` | Employee ID does not exist |

## Use Cases

### Pre-Payroll Validation

Before creating a payroll, check all employees:

```javascript
async function validateEmployeesForPayroll(employeeIDs, payDate) {
  const results = await Promise.all(
    employeeIDs.map(async (employeeID) => {
      const response = await fetch(
        'https://api.toku.com/api/payroll/canRunPayrollForEmployee',
        {
          method: 'GET',
          headers: {
            'Authorization': `Bearer ${process.env.TOKU_API_KEY}`,
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            employeeID,
            payDate,
            onCycle: true
          })
        }
      );
      return response.json();
    })
  );

  const eligible = results.filter(r => r.result.data.canRunPayroll);
  const ineligible = results.filter(r => !r.result.data.canRunPayroll);

  return { eligible, ineligible };
}
```

## Related Endpoints

<CardGroup cols={2}>
  <Card title="Create On-Cycle Payroll" icon="calendar" href="/api/payroll/create-on-cycle">
    Create payroll after validation
  </Card>
  <Card title="Get Employee" icon="user" href="/api/employees/get-employee">
    View full employee details
  </Card>
</CardGroup>
